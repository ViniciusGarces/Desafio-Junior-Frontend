<div class="user_page">
    <header class="header_user">
        <div class="logo_caesb">
            <img src="assets/img/logo_caesb.webp" alt="Logo Caesb">
            <h1>CAESB</h1>
        </div>
        <div class="user_menu">
            <img src="assets/img/user.png" alt="User Icon">
            <img src="assets/img/log-out.png" alt="log-out Icon" (click)="logout()" title="Sair">
        </div>
    </header>


    <div class="container_user">
        <aside>
            <nav>
                <a routerLink="/hubLicense"><img src="assets/img/file.png"> Hub Licenças</a>
                <a routerLink="/user"><img src="assets/img/users.png">Usuários</a>
                <a routerLink="/user"><img src="assets/img/log.png" >Logs de Acesso</a>
            </nav>
        </aside>

        <main>
            <div class="user_list">
                <div class="btn_list">
                    <button (click)="newUser()"><img src="assets/img/add.png" alt=""> NOVO</button>
                    <button><img src="assets/img/import.png" alt=""> IMPORTAR</button>
                </div>
                <h2>Lista de Usuários</h2>
                <div class="search_bar">
                    <div class="search_input_container">
                        <img src="assets/img/search.png" alt="search icon">
                        <input type="text" placeholder="Pesquisar...">
                    </div>
                </div>
            </div>
            <div class="table_container_list">
                <table>
                    <thead>
                        <tr>
                            <th>Login</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>CPF</th>
                            <th>Perfil</th>
                            <th>Licença</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--capture the index-->
                        <tr *ngFor="let user of users; let i = index">
                            <td>{{user.login}}</td>
                            <td>{{user.name}}</td>
                            <td>{{user.email}}</td>
                            <td>{{user.cpf}}</td>
                            <td>{{user.profile}}</td>
                            <td>{{user.license}}</td>
                            <td>
                                <img src="assets/img/edit.png" (click)="editUser(i)" title="Editar">
                                <img src="assets/img/delete.png" (click)="deleteUser(i)" title="Excluir">
                            </td>
                            
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--module for registering new users-->
            <div class="user" *ngIf="showForm">
                <div class="module_content">
                    <h2>Cadastro de Usuário</h2>
                    <form (ngSubmit)="saveUser(userForm)" #userForm="ngForm">
                        <label for="login">Login:</label>
                        <input type="text" id="login" [(ngModel)]="user.login" name="login" required placeholder="inicial do perfil + 6 digitos.Ex: a000000">

                        <label for="name">Nome:</label>
                        <input type="text" id="name" [(ngModel)]="user.name" name="name" required>

                        <label for="email">Email:</label>
                        <input type="email" id="email" [(ngModel)]="user.email" name="email"  placeholder="nome@gmail.com">

                        <label for="cpf">CPF:</label>
                        <input type="text" id="cpf" [(ngModel)]="user.cpf" name="cpf"  placeholder="00000000000">

                        <label for="profile">Perfil:</label>
                        <select id="profile" [(ngModel)]="user.profile" name="profile" required>
                            <option value="Administrador">Administrador</option>
                            <option value="Supervisor">Supervisor</option>
                            <option value="Encarregado">Encarregado</option>
                        </select>

                        <label for="license">Licença:</label>
                        <select id="license" [(ngModel)]="user.license" name="license" required>
                            <option value="Seat Based">Seat Based</option>
                            <option value="Login Based">Login Based</option>
                        </select>

                        <div class="btn_module_user">
                            <button type="submit" >Salvar</button>
                            <button type="reset" (click)="cancel()">Cancelar</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
    <footer>
        <p>© 2025 Copyright: Digiteam</p>
    </footer>
</div>